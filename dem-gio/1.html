<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đồng hồ đếm giờ</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100vh;
    font-family: sans-serif;
    background: #f0f0f0;
  }
  .timer-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  .timer-box {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 3rem;
  }
  label {
    width: 120px;
    text-align: right;
    font-weight: bold;
  }
  .controls {
    margin-top: 20px;
    display: flex;
    gap: 10px;
  }
  input[type="number"] {
    width: 100px;
    font-size: 1.2rem;
    text-align: center;
  }
</style>
</head>
<body>
<div class="timer-container">
  <div class="timer-box">
    <label>Đếm xuôi:</label>
    <span id="up">00.000</span>
  </div>
  <div class="timer-box">
    <label>Đếm ngược:</label>
    <input type="number" id="countdownInput" placeholder="s" min="0">
    <span id="down">00.000</span>
  </div>
  <div class="controls">
    <button id="startStop">Bắt đầu</button>
    <button id="reset">Reset</button>
  </div>
</div>

<script>
let upStart = 0;       // mili giây
let downStart = 0;     // mili giây
let interval = null;
let running = false;

const upDisplay = document.getElementById('up');
const downDisplay = document.getElementById('down');
const countdownInput = document.getElementById('countdownInput');
const startStopBtn = document.getElementById('startStop');
const resetBtn = document.getElementById('reset');

function formatTime(ms) {
  const seconds = Math.floor(ms / 1000);
  const milliseconds = ms % 1000;
  return `${seconds.toString().padStart(2,'0')}.${milliseconds.toString().padStart(3,'0')}`;
}

function updateDisplay() {
  upDisplay.textContent = formatTime(upStart);
  downDisplay.textContent = formatTime(Math.max(0, downStart));
}

function tick() {
  upStart += 10;
  if (downStart > 0) downStart -= 10;
  updateDisplay();
}

startStopBtn.addEventListener('click', () => {
  if (!running) {
    if (upStart === 0 && countdownInput.value) {
      downStart = parseInt(countdownInput.value) * 1000;
    }
    interval = setInterval(tick, 10);
    running = true;
    startStopBtn.textContent = 'Dừng';
  } else {
    clearInterval(interval);
    running = false;
    startStopBtn.textContent = 'Tiếp tục';
  }
});

resetBtn.addEventListener('click', () => {
  clearInterval(interval);
  running = false;
  upStart = 0;
  downStart = countdownInput.value ? parseInt(countdownInput.value) * 1000 : 0;
  updateDisplay();
  startStopBtn.textContent = 'Bắt đầu';
});
</script>
</body>
</html>
