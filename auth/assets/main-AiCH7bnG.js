import{s as g,a as c,c as h,o as y,b as p}from"./firebase-MFGuTdBG.js";const k=document.getElementById("auth-form"),E=document.getElementById("email"),f=document.getElementById("password"),s=document.getElementById("submit-btn"),l=document.getElementById("toggle-auth"),r=document.getElementById("message"),u=document.getElementById("user-info"),m=document.querySelector(".auth-container"),x=document.getElementById("user-name"),C=document.getElementById("user-email"),I=document.getElementById("logout-btn");let a=!0;function i(e,t){r.textContent=e,r.className=`message ${t}`,setTimeout(()=>{r.className="message"},5e3)}l.addEventListener("click",()=>{a=!a;const e=document.querySelector("h1"),t=document.querySelector(".auth-header p");a?(e.textContent="Chào mừng trở lại",t.textContent="Đăng nhập để tiếp tục trải nghiệm ND Labs",s.querySelector("span").textContent="Đăng nhập",l.innerHTML='Chưa có tài khoản? <span class="link">Đăng ký ngay</span>'):(e.textContent="Tạo tài khoản mới",t.textContent="Tham gia cộng đồng ND Labs ngay hôm nay",s.querySelector("span").textContent="Đăng ký",l.innerHTML='Đã có tài khoản? <span class="link">Đăng nhập ngay</span>')});k.addEventListener("submit",async e=>{e.preventDefault();const t=E.value,d=f.value;s.disabled=!0,s.querySelector("span").textContent=a?"Đang đăng nhập...":"Đang đăng ký...";try{a?(await g(c,t,d),i("Đăng nhập thành công!","success")):(await h(c,t,d),i("Đăng ký thành công!","success"))}catch(n){console.error(n);let o="Đã có lỗi xảy ra. Vui lòng thử lại.";n.code==="auth/user-not-found"||n.code==="auth/wrong-password"?o="Email hoặc mật khẩu không chính xác.":n.code==="auth/email-already-in-use"?o="Email này đã được sử dụng.":n.code==="auth/weak-password"?o="Mật khẩu quá yếu (tối thiểu 6 ký tự).":n.code==="auth/invalid-email"&&(o="Email không hợp lệ."),i(o,"error")}finally{s.disabled=!1,s.querySelector("span").textContent=a?"Đăng nhập":"Đăng ký"}});y(c,e=>{e?(m.classList.add("hidden"),u.classList.remove("hidden"),x.textContent=e.displayName||"Người dùng",C.textContent=e.email):(m.classList.remove("hidden"),u.classList.add("hidden"))});I.addEventListener("click",async()=>{try{await p(c),i("Đã đăng xuất.","success")}catch{i("Lỗi khi đăng xuất.","error")}});
