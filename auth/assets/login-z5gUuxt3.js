import{o as l,s as m,a as r,G as u,b as g}from"./firebase-DLphYnwd.js";const h=document.getElementById("login-form"),p=document.getElementById("ndid"),w=document.getElementById("password"),o=document.getElementById("submit-btn"),y=document.getElementById("google-btn"),n=document.createElement("div");n.className="status-msg";document.body.appendChild(n);function i(t,e){n.textContent=t,n.className=`status-msg show ${e}`,setTimeout(()=>{n.className="status-msg"},4e3)}function d(t,e){localStorage.setItem("nd_user",JSON.stringify({displayName:t.displayName,email:t.email,photoURL:t.photoURL,uid:t.uid,ndid:e}))}l(r,async t=>{t&&(localStorage.getItem("nd_user")||d(t,t.email?.split("@")[0]||""),window.location.href="/")});h.addEventListener("submit",async t=>{t.preventDefault();const e=p.value.trim().toLowerCase(),s=w.value;if(!(!e||!s)){o.disabled=!0,o.innerHTML="<span>Đang xác thực...</span>";try{const a=e.includes("@")?e:`${e}@ndlabs.com`,c=await m(r,a,s);d(c.user,e),i("Đăng nhập thành công!","success"),setTimeout(()=>{window.location.href="/"},800)}catch(a){console.error(a),i("NDID hoặc mật khẩu không chính xác.","error")}finally{o.disabled=!1,o.innerHTML='<span>Đăng nhập</span><i class="ph-bold ph-arrow-right"></i>'}}});y.addEventListener("click",async()=>{const t=new u;try{const e=await g(r,t),s=e.user.email?.split("@")[0].toLowerCase()||"member";d(e.user,s),window.location.href="/"}catch{i("Lỗi khi kết nối với Google.","error")}});
