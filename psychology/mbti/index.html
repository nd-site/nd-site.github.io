<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫Øc Nghi·ªám T√≠nh C√°ch MBTI - ND Psychology</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

        :root {
            --primary: #8b5cf6;
            --primary-light: #a78bfa;
            --secondary: #ec4899;
            --bg-main: #f5f3ff;
        }

        html,
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-main);
            color: #1e293b;
        }

        .bg-blob {
            position: fixed;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, rgba(255, 255, 255, 0) 70%);
            border-radius: 50%;
            z-index: -1;
            filter: blur(80px);
            animation: blob-bounce 10s infinite ease-in-out;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 20px 40px -12px rgba(139, 92, 246, 0.1);
            border-radius: 24px;
        }

        .btn-main {
            background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
            color: white;
            transition: all 0.3s;
            box-shadow: 0 8px 16px -4px rgba(139, 92, 246, 0.4);
        }

        .btn-main:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px -4px rgba(139, 92, 246, 0.5);
            background: linear-gradient(135deg, #7c3aed 0%, var(--primary) 100%);
        }

        .option-btn {
            transition: all 0.2s;
        }

        .option-btn:hover {
            transform: scale(1.05);
        }

        .option-selected {
            border-color: var(--primary);
            background-color: #ede9fe;
            color: var(--primary);
            font-weight: 700;
        }

        /* Scale Option Specifics */
        .scale-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .scale-circle:hover {
            border-color: var(--primary);
            background-color: #f3f4f6;
        }

        .scale-circle.active {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        .progress-bar-fill {
            transition: width 0.4s ease-in-out;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">

    <!-- Background Elements -->
    <div class="bg-blob" style="top: -100px; left: -100px;"></div>
    <div class="bg-blob"
        style="bottom: -100px; right: -100px; background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, rgba(255, 255, 255, 0) 70%);">
    </div>

    <div class="w-full max-w-3xl z-10">

        <!-- Header -->
        <header class="flex items-center justify-between mb-8">
            <a href="../index.html"
                class="flex items-center gap-2 text-slate-500 hover:text-violet-600 transition-colors font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                        clip-rule="evenodd" />
                </svg>
                Quay l·∫°i
            </a>
            <div class="text-violet-600 font-extrabold text-xl tracking-tight">ND Psychology ‚Ä¢ MBTI</div>
        </header>

        <!-- Main Content Area -->
        <main id="app-container" class="glass-card min-h-[400px] flex flex-col relative overflow-hidden">

            <!-- VIEW 1: WELCOME SCREEN -->
            <div id="welcome-screen"
                class="p-8 md:p-12 text-center flex flex-col items-center justify-center h-full animate-fade-in">
                <div
                    class="w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center text-4xl mb-6 shadow-inner text-violet-600">
                    üß©
                </div>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Kh√°m Ph√° T√≠nh C√°ch C·ªßa B·∫°n</h1>
                <p class="text-slate-500 text-lg mb-8 max-w-lg mx-auto">
                    B√†i tr·∫Øc nghi·ªám MBTI gi√∫p b·∫°n hi·ªÉu r√µ h∆°n v·ªÅ ƒëi·ªÉm m·∫°nh, ƒëi·ªÉm y·∫øu v√† c√°ch b·∫°n t∆∞∆°ng t√°c v·ªõi th·∫ø gi·ªõi
                    xung quanh.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 w-full justify-center">
                    <button onclick="startTest()"
                        class="btn-main px-8 py-3.5 rounded-full font-bold text-lg shadow-xl w-full sm:w-auto">
                        B·∫Øt ƒë·∫ßu ngay
                    </button>
                </div>
                <p class="mt-6 text-sm text-slate-400">Th·ªùi gian ∆∞·ªõc t√≠nh: 5-10 ph√∫t ‚Ä¢ 24 c√¢u h·ªèi</p>
            </div>

            <!-- VIEW 2: QUIZ SCREEN -->
            <div id="quiz-screen" class="hidden flex-col h-full w-full">
                <!-- Progress Bar -->
                <div class="w-full h-2 bg-slate-100">
                    <div id="progress-bar" class="h-full bg-violet-600 progress-bar-fill w-0"></div>
                </div>

                <div
                    class="flex-grow flex flex-col items-center justify-center p-6 md:p-12 text-center animate-fade-in">
                    <span id="question-number"
                        class="text-violet-500 font-bold text-sm tracking-widest uppercase mb-4">C√¢u h·ªèi 1/24</span>
                    <h2 id="question-text"
                        class="text-xl md:text-2xl font-bold text-slate-800 mb-10 min-h-[80px] flex items-center justify-center">
                        B·∫°n th∆∞·ªùng c·∫£m th·∫•y tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng sau khi tham gia c√°c bu·ªïi ti·ªác t√πng ƒë√¥ng ng∆∞·ªùi.
                    </h2>

                    <!-- Options Scale -->
                    <div class="w-full max-w-xl mx-auto">
                        <div
                            class="flex justify-between items-center mb-2 px-2 text-xs font-bold text-slate-400 uppercase tracking-wider">
                            <span>R·∫•t kh√¥ng ƒë·ªìng √Ω</span>
                            <span>R·∫•t ƒë·ªìng √Ω</span>
                        </div>
                        <div class="flex justify-between items-center gap-2 md:gap-4 relative py-4">
                            <!-- Line behind circles -->
                            <div
                                class="absolute w-[94%] left-[3%] top-1/2 -translate-y-1/2 h-1 bg-slate-200 -z-10 rounded-full">
                            </div>

                            <button onclick="selectOption(1)"
                                class="scale-circle w-12 h-12 md:w-14 md:h-14 bg-white border-2 border-slate-300 text-slate-400 hover:border-red-400 hover:text-red-500 hover:bg-red-50"
                                data-value="1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                            <button onclick="selectOption(2)"
                                class="scale-circle w-10 h-10 md:w-12 md:h-12 bg-white border-2 border-slate-300 text-slate-400 hover:border-red-300 hover:text-red-400 hover:bg-red-50"
                                data-value="2">
                            </button>
                            <button onclick="selectOption(3)"
                                class="scale-circle w-8 h-8 md:w-10 md:h-10 bg-white border-2 border-slate-300 text-slate-400 hover:border-slate-400 hover:text-slate-500"
                                data-value="3">
                            </button>
                            <button onclick="selectOption(4)"
                                class="scale-circle w-10 h-10 md:w-12 md:h-12 bg-white border-2 border-slate-300 text-slate-400 hover:border-violet-300 hover:text-violet-400 hover:bg-violet-50"
                                data-value="4">
                            </button>
                            <button onclick="selectOption(5)"
                                class="scale-circle w-12 h-12 md:w-14 md:h-14 bg-white border-2 border-slate-300 text-slate-400 hover:border-violet-500 hover:text-violet-600 hover:bg-violet-50"
                                data-value="5">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                        d="M5 13l4 4L19 7" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6 border-t border-slate-100 flex justify-between">
                    <button onclick="prevQuestion()" id="prev-btn"
                        class="text-slate-400 hover:text-slate-600 px-4 py-2 rounded-lg font-medium invisible">
                        ‚Üê Quay l·∫°i
                    </button>
                    <!-- Skip button removed, force answer -->
                </div>
            </div>

            <!-- VIEW 3: LOADING SCREEN -->
            <div id="loading-screen" class="hidden flex-col items-center justify-center h-full p-12 text-center">
                <div class="relative w-24 h-24 mb-8">
                    <div class="absolute inset-0 border-4 border-slate-100 rounded-full"></div>
                    <div
                        class="absolute inset-0 border-4 border-violet-600 rounded-full border-t-transparent animate-spin">
                    </div>
                    <div class="absolute inset-0 flex items-center justify-center text-2xl">üß†</div>
                </div>
                <h2 class="text-2xl font-bold text-slate-800 mb-2">ƒêang ph√¢n t√≠ch k·∫øt qu·∫£...</h2>
                <p class="text-slate-500">H·ªá th·ªëng ƒëang t·ªïng h·ª£p c√°c c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n</p>
            </div>

            <!-- VIEW 4: RESULT SCREEN -->
            <div id="result-screen" class="hidden flex-col h-full animate-fade-in relative z-10 w-full">
                <!-- Confetti placeholder or background effect -->
                <div
                    class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-violet-500 via-pink-500 to-violet-500">
                </div>

                <div class="p-8 md:p-10 flex flex-col items-center text-center">
                    <span class="text-slate-500 font-bold uppercase tracking-widest text-sm mb-2">K·∫øt qu·∫£ c·ªßa b·∫°n
                        l√†</span>
                    <h1 id="result-type"
                        class="text-6xl md:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-violet-600 to-indigo-600 mb-4">
                        INFJ</h1>
                    <h2 id="result-title" class="text-2xl font-bold text-slate-800 mb-6">Ng∆∞·ªùi Che Ch·ªü</h2>

                    <div class="w-full max-w-2xl bg-violet-50 rounded-2xl p-6 mb-8 text-left border border-violet-100">
                        <p id="result-desc" class="text-slate-700 leading-relaxed mb-4">
                            INFJ l√† nh·ªØng ng∆∞·ªùi l√Ω t∆∞·ªüng h√≥a th·∫ßm l·∫∑ng v√† ƒë·∫ßy b√≠ ·∫©n, nh∆∞ng c≈©ng r·∫•t truy·ªÅn c·∫£m h·ª©ng v√†
                            kh√¥ng bi·∫øt m·ªát m·ªèi. B·∫°n nh√¨n th·∫ø gi·ªõi v·ªõi chi·ªÅu s√¢u t∆∞ duy, lu√¥n t√¨m ki·∫øm √Ω nghƒ©a v√† s·ª± k·∫øt
                            n·ªëi trong c√°c √Ω t∆∞·ªüng, m·ªëi quan h·ªá v√† c·ªßa c·∫£i v·∫≠t ch·∫•t.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                            <div>
                                <h4 class="font-bold text-violet-700 mb-2 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path
                                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z">
                                        </path>
                                    </svg>
                                    ƒêi·ªÉm m·∫°nh
                                </h4>
                                <ul id="result-strengths" class="text-sm text-slate-600 space-y-1 list-disc pl-4">
                                    <li>S√°ng t·∫°o v√† s√¢u s·∫Øc</li>
                                    <li>ƒêam m√™ v√† t·∫≠n t·ª•y</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-bold text-red-500 mb-2 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                                            clip-rule="evenodd"></path>
                                    </svg>
                                    ƒêi·ªÉm y·∫øu
                                </h4>
                                <ul id="result-weaknesses" class="text-sm text-slate-600 space-y-1 list-disc pl-4">
                                    <li>Nh·∫°y c·∫£m v·ªõi ch·ªâ tr√≠ch</li>
                                    <li>D·ªÖ b·ªã ki·ªát s·ª©c (Burnout)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <button onclick="location.reload()"
                            class="px-6 py-2.5 rounded-full border-2 border-violet-100 text-violet-600 font-bold hover:bg-violet-50 transition-colors">
                            L√†m l·∫°i
                        </button>
                        <a href="../index.html"
                            class="btn-main px-6 py-2.5 rounded-full font-bold shadow-lg flex items-center gap-2">
                            Kh√°m ph√° th√™m
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 8l4 4m0 0l-4 4m4-4H3" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <footer class="mt-8 text-center text-slate-400 text-sm">
            <p>¬© 2026 ND Labs. ND Psychology ‚Ä¢ K·∫øt qu·∫£ ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o.</p>
        </footer>
    </div>

    <!-- Application Logic -->
    <script>
        // --- DATA ---
        const questions = [
            // E vs I (Extraversion vs Introversion)
            { id: 1, text: "B·∫°n c·∫£m th·∫•y h·ª©ng kh·ªüi khi ·ªü trong ƒë√°m ƒë√¥ng h∆°n l√† ·ªü m·ªôt m√¨nh.", dim: 'E', rev: false },
            { id: 2, text: "B·∫°n th∆∞·ªùng l√† ng∆∞·ªùi b·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán v·ªõi ng∆∞·ªùi l·∫°.", dim: 'E', rev: false },
            { id: 3, text: "B·∫°n th√≠ch l√†m vi·ªác m·ªôt m√¨nh y√™n tƒ©nh h∆°n l√† l√†m vi·ªác nh√≥m ·ªìn √†o.", dim: 'E', rev: true }, // I favor
            { id: 4, text: "Sau m·ªôt tu·∫ßn l√†m vi·ªác cƒÉng th·∫≥ng, b·∫°n mu·ªën ra ngo√†i ch∆°i h∆°n l√† ·ªü nh√† ngh·ªâ ng∆°i.", dim: 'E', rev: false },
            { id: 5, text: "B·∫°n suy nghƒ© k·ªπ tr∆∞·ªõc khi n√≥i thay v√¨ n√≥i ra ngay suy nghƒ© c·ªßa m√¨nh.", dim: 'E', rev: true }, // I favor
            { id: 6, text: "Vi·ªác tr·ªü th√†nh t√¢m ƒëi·ªÉm c·ªßa s·ª± ch√∫ √Ω khi·∫øn b·∫°n kh√¥ng tho·∫£i m√°i.", dim: 'E', rev: true }, // I favor

            // N vs S (Intuition vs Sensing)
            { id: 7, text: "B·∫°n quan t√¢m ƒë·∫øn √Ω nghƒ©a ·∫©n sau s·ª± vi·ªác h∆°n l√† nh·ªØng chi ti·∫øt th·ª±c t·∫ø.", dim: 'N', rev: false },
            { id: 8, text: "B·∫°n th∆∞·ªùng m∆° m·ªông v·ªÅ t∆∞∆°ng lai h∆°n l√† t·∫≠p trung v√†o hi·ªán t·∫°i.", dim: 'N', rev: false },
            { id: 9, text: "B·∫°n tin v√†o kinh nghi·ªám th·ª±c t·∫ø h∆°n l√† nh·ªØng l√Ω thuy·∫øt tr·ª´u t∆∞·ª£ng.", dim: 'N', rev: true }, // S favor
            { id: 10, text: "B·∫°n th√≠ch nh·ªØng h∆∞·ªõng d·∫´n c·ª• th·ªÉ, r√µ r√†ng t·ª´ng b∆∞·ªõc m·ªôt.", dim: 'N', rev: true }, // S favor
            { id: 11, text: "B·∫°n th∆∞·ªùng nh√¨n th·∫•y b·ª©c tranh to√†n c·∫£nh tr∆∞·ªõc khi ƒëi v√†o chi ti·∫øt.", dim: 'N', rev: false },
            { id: 12, text: "B·∫°n th√≠ch s·ª± m·ªõi l·∫° v√† s√°ng t·∫°o h∆°n l√† nh·ªØng quy tr√¨nh ƒë√£ ƒë∆∞·ª£c ki·ªÉm ch·ª©ng.", dim: 'N', rev: false },

            // T vs F (Thinking vs Feeling)
            { id: 13, text: "Khi gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ, b·∫°n d·ª±a v√†o logic h∆°n l√† c·∫£m x√∫c.", dim: 'T', rev: false },
            { id: 14, text: "B·∫°n coi tr·ªçng s·ª± c√¥ng b·∫±ng v√† nh·∫•t qu√°n h∆°n l√† s·ª± h√≤a h·ª£p v√† khoan dung.", dim: 'T', rev: false },
            { id: 15, text: "B·∫°n th∆∞·ªùng b·ªã ƒë√°nh gi√° l√† ng∆∞·ªùi l·∫°nh l√πng ho·∫∑c qu√° l√Ω tr√≠.", dim: 'T', rev: false },
            { id: 16, text: "B·∫°n d·ªÖ b·ªã ·∫£nh h∆∞·ªüng b·ªüi c·∫£m x√∫c c·ªßa ng∆∞·ªùi kh√°c.", dim: 'T', rev: true }, // F favor
            { id: 17, text: "Trong m·ªôt cu·ªôc tranh lu·∫≠n, s·ª± th·∫≠t quan tr·ªçng h∆°n l√† kh√¥ng l√†m t·ªïn th∆∞∆°ng ai ƒë√≥.", dim: 'T', rev: false },
            { id: 18, text: "B·∫°n ƒë∆∞a ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n tr√°i tim m√°ch b·∫£o h∆°n l√† ph√¢n t√≠ch s·ªë li·ªáu.", dim: 'T', rev: true }, // F favor

            // J vs P (Judging vs Perceiving)
            { id: 19, text: "B·∫°n th√≠ch l√™n k·∫ø ho·∫°ch chi ti·∫øt cho m·ªçi vi·ªác tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu.", dim: 'J', rev: false },
            { id: 20, text: "B·∫°n c·∫£m th·∫•y kh√≥ ch·ªãu khi m·ªçi th·ª© kh√¥ng di·ªÖn ra theo k·∫ø ho·∫°ch.", dim: 'J', rev: false },
            { id: 21, text: "B·∫°n th√≠ch ƒë·ªÉ m·ªçi th·ª© t·ª± nhi√™n, t√πy c∆° ·ª©ng bi·∫øn h∆°n l√† s·∫Øp ƒë·∫∑t tr∆∞·ªõc.", dim: 'J', rev: true }, // P favor
            { id: 22, text: "B·∫°n th∆∞·ªùng ho√†n th√†nh c√¥ng vi·ªác tr∆∞·ªõc th·ªùi h·∫°n r·∫•t l√¢u.", dim: 'J', rev: false },
            { id: 23, text: "B·∫°n th√≠ch gi·ªØ cho c√°c l·ª±a ch·ªçn c·ªßa m√¨nh lu√¥n m·ªü thay v√¨ ch·ªët ph∆∞∆°ng √°n s·ªõm.", dim: 'J', rev: true }, // P favor
            { id: 24, text: "S·ª± ngƒÉn n·∫Øp v√† tr·∫≠t t·ª± l√† r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi b·∫°n.", dim: 'J', rev: false },
        ];

        const types = {
            "ISTJ": { title: "Ng∆∞·ªùi Tr√°ch Nhi·ªám", desc: "Nghi√™m t√∫c, th·ª±c t·∫ø v√† ƒë√°ng tin c·∫≠y. H·ªç coi tr·ªçng truy·ªÅn th·ªëng v√† s·ª± tr·∫≠t t·ª±.", strengths: ["C√≥ tr√°ch nhi·ªám", "T·ªâ m·ªâ", "Trung th·ª±c"], weaknesses: ["C·ª©ng nh·∫Øc", "Kh√≥ th√≠ch nghi", "Hay ph√°n x√©t"] },
            "ISFJ": { title: "Ng∆∞·ªùi Nu√¥i D∆∞·ª°ng", desc: "·∫§m √°p, t·∫≠n t·ª•y v√† lu√¥n quan t√¢m ƒë·∫øn ng∆∞·ªùi kh√°c. H·ªç l√†m vi·ªác chƒÉm ch·ªâ ƒë·ªÉ ƒë·∫£m b·∫£o s·ª± h√†i h√≤a.", strengths: ["H·ªó tr·ª£ t·ªët", "ƒê√°ng tin c·∫≠y", "Ki√™n nh·∫´n"], weaknesses: ["Qu√° nh√∫n nh∆∞·ªùng", "Ng·∫°i thay ƒë·ªïi", "D·ªÖ b·ªã l·ª£i d·ª•ng"] },
            "INFJ": { title: "Ng∆∞·ªùi Che Ch·ªü", desc: "S√¢u s·∫Øc, l√Ω t∆∞·ªüng h√≥a v√† ƒë·∫ßy l√≤ng tr·∫Øc ·∫©n. H·ªç lu√¥n t√¨m ki·∫øm √Ω nghƒ©a s√¢u xa trong cu·ªôc s·ªëng.", strengths: ["S√°ng t·∫°o", "Th·∫•u hi·ªÉu", "Quy·∫øt t√¢m"], weaknesses: ["Nh·∫°y c·∫£m", "D·ªÖ ki·ªát s·ª©c", "C·∫ßu to√†n"] },
            "INTJ": { title: "Nh√† Ki·∫øn T·∫°o", desc: "T∆∞ duy chi·∫øn l∆∞·ª£c, ƒë·ªôc l·∫≠p v√† c√≥ t·∫ßm nh√¨n xa. H·ªç lu√¥n t√¨m c√°ch c·∫£i ti·∫øn m·ªçi th·ª©.", strengths: ["Th√¥ng minh", "T·ª± tin", "Chi·∫øn l∆∞·ª£c"], weaknesses: ["Ki√™u ng·∫°o", "Qu√° ph√¢n t√≠ch", "Thi·∫øu ki√™n nh·∫´n"] },
            "ISTP": { title: "Nh√† K·ªπ Thu·∫≠t", desc: "Th·ª±c t·∫ø, linh ho·∫°t v√† gi·ªèi gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ. H·ªç th√≠ch t√¨m hi·ªÉu c√°ch m·ªçi th·ª© v·∫≠n h√†nh.", strengths: ["L·∫°c quan", "S√°ng t·∫°o", "Th·ª±c t·∫ø"], weaknesses: ["C·ª©ng ƒë·∫ßu", "R·ªßi ro cao", "K√≠n ƒë√°o"] },
            "ISFP": { title: "Ng∆∞·ªùi Ngh·ªá Sƒ©", desc: "Nh·∫π nh√†ng, th√¢n thi·ªán v√† y√™u c√°i ƒë·∫πp. H·ªç th√≠ch s·ªëng trong hi·ªán t·∫°i v√† t·∫≠n h∆∞·ªüng t·ª´ng kho·∫£nh kh·∫Øc.", strengths: ["Duy√™n d√°ng", "Ngh·ªá thu·∫≠t", "ƒêam m√™"], weaknesses: ["D·ªÖ cƒÉng th·∫≥ng", "C·∫°nh tranh k√©m", "Kh√≥ ƒëo√°n"] },
            "INFP": { title: "Ng∆∞·ªùi H√≤a Gi·∫£i", desc: "L√Ω t∆∞·ªüng, trung th√†nh v√† lu√¥n t√¨m ki·∫øm s·ª± t·ªët ƒë·∫πp trong m·ªçi ng∆∞·ªùi. H·ªç s·ªëng theo gi√° tr·ªã ri√™ng.", strengths: ["ƒê·ªìng c·∫£m", "S√°ng t·∫°o", "C·ªüi m·ªü"], weaknesses: ["M∆° m·ªông qu√° m·ª©c", "D·ªÖ t·ªïn th∆∞∆°ng", "Thi·∫øu th·ª±c t·∫ø"] },
            "INTP": { title: "Nh√† T∆∞ Duy", desc: "S√°ng t·∫°o, logic v√† t√≤ m√≤. H·ªç th√≠ch ph√¢n t√≠ch c√°c h·ªá th·ªëng v√† √Ω t∆∞·ªüng tr·ª´u t∆∞·ª£ng.", strengths: ["Ph√¢n t√≠ch t·ªët", "T∆∞ duy m·ªü", "Kh√°ch quan"], weaknesses: ["L∆° ƒë√£ng", "Thi·∫øu t·ªï ch·ª©c", "V√¥ t√¢m"] },
            "ESTP": { title: "Ng∆∞·ªùi Th·ª±c Thi", desc: "NƒÉng ƒë·ªông, th·ª±c t·∫ø v√† th√≠ch h√†nh ƒë·ªông ngay l·∫≠p t·ª©c. H·ªç gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ m·ªôt c√°ch linh ho·∫°t.", strengths: ["T√°o b·∫°o", "H√≤a ƒë·ªìng", "Th·∫≥ng th·∫Øn"], weaknesses: ["Thi·∫øu ki√™n nh·∫´n", "R·ªßi ro cao", "Mau ch√°n"] },
            "ESFP": { title: "Ng∆∞·ªùi Tr√¨nh Di·ªÖn", desc: "Vui v·∫ª, nhi·ªát t√¨nh v√† th√≠ch l√† trung t√¢m c·ªßa s·ª± ch√∫ √Ω. H·ªç l√†m cho cu·ªôc s·ªëng tr·ªü n√™n th√∫ v·ªã.", strengths: ["T√°o b·∫°o", "Th·ª±c t·∫ø", "Th·∫©m m·ªπ t·ªët"], weaknesses: ["Kh√≥ t·∫≠p trung", "D·ªÖ t·ª± √°i", "K√©m quy ho·∫°ch"] },
            "ENFP": { title: "Ng∆∞·ªùi Truy·ªÅn C·∫£m H·ª©ng", desc: "Nhi·ªát t√¨nh, s√°ng t·∫°o v√† h√≤a ƒë·ªìng. H·ªç lu√¥n t√¨m th·∫•y kh·∫£ nƒÉng trong m·ªçi vi·ªác.", strengths: ["T√≤ m√≤", "Giao ti·∫øp t·ªët", "NƒÉng l∆∞·ª£ng cao"], weaknesses: ["Thi·∫øu t·∫≠p trung", "Suy nghƒ© qu√° nhi·ªÅu", "D·ªÖ cƒÉng th·∫≥ng"] },
            "ENTP": { title: "Ng∆∞·ªùi Tranh Bi·ªán", desc: "Th√¥ng minh, nhanh tr√≠ v√† th√≠ch th·ª≠ th√°ch c√°c √Ω t∆∞·ªüng. H·ªç gi·ªèi t√¨m ra gi·∫£i ph√°p m·ªõi.", strengths: ["Hi·ªÉu bi·∫øt r·ªông", "T∆∞ duy nhanh", "S√°ng t·∫°o"], weaknesses: ["Th√≠ch tranh c√£i", "T√†n nh·∫´n", "Mau ch√°n"] },
            "ESTJ": { title: "Ng∆∞·ªùi ƒêi·ªÅu H√†nh", desc: "Th·ª±c t·∫ø, quy·∫øt ƒëo√°n v√† gi·ªèi t·ªï ch·ª©c. H·ªç th√≠ch qu·∫£n l√Ω m·ªçi vi·ªác theo quy tr√¨nh r√µ r√†ng.", strengths: ["T·∫≠n t·ª•y", "M·∫°nh m·∫Ω", "T·ªï ch·ª©c t·ªët"], weaknesses: ["C·ª©ng nh·∫Øc", "Kh√≥ th∆∞ gi√£n", "Ph√°n x√©t"] },
            "ESFJ": { title: "Ng∆∞·ªùi ChƒÉm S√≥c", desc: "T·∫≠n t√¢m, h√≤a ƒë·ªìng v√† th√≠ch gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c. H·ªç coi tr·ªçng s·ª± h√≤a h·ª£p v√† truy·ªÅn th·ªëng.", strengths: ["Trung th√†nh", "Nh·∫°y c·∫£m", "Gi·ªèi k·∫øt n·ªëi"], weaknesses: ["C·∫ßn ƒë∆∞·ª£c khen", "Thi·∫øu linh ho·∫°t", "D·ªÖ b·ªã ch·ªâ tr√≠ch"] },
            "ENFJ": { title: "Ng∆∞·ªùi Ch·ªâ D·∫´n", desc: "L√¥i cu·ªën, ƒë√°ng tin c·∫≠y v√† gi·ªèi l√£nh ƒë·∫°o. H·ªç lu√¥n nh√¨n th·∫•y ti·ªÅm nƒÉng ·ªü ng∆∞·ªùi kh√°c.", strengths: ["Khoan dung", "ƒê√°ng tin c·∫≠y", "L√¥i cu·ªën"], weaknesses: ["Qu√° duy t√¢m", "Qu√° nh·∫°y c·∫£m", "Hay lo l·∫Øng"] },
            "ENTJ": { title: "Nh√† L√£nh ƒê·∫°o", desc: "Th·∫≥ng th·∫Øn, quy·∫øt ƒëo√°n v√† c√≥ kh·∫£ nƒÉng nh√¨n xa tr√¥ng r·ªông. H·ªç gi·ªèi v·∫°ch ra k·∫ø ho·∫°ch d√†i h·∫°n.", strengths: ["Hi·ªáu qu·∫£", "T·ª± tin", "L√Ω tr√≠"], weaknesses: ["ƒê·ªôc ƒëo√°n", "Ki√™u ng·∫°o", "L·∫°nh l√πng"] }
        };

        // --- STATE ---
        let currentQuestionIndex = 0;
        let answers = {}; // { qID: value }
        let isTransitioning = false;

        // --- ELEMENT REFS ---
        const welcomeScreen = document.getElementById('welcome-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const loadingScreen = document.getElementById('loading-screen');
        const resultScreen = document.getElementById('result-screen');

        const questionText = document.getElementById('question-text');
        const questionNumber = document.getElementById('question-number');
        const progressBar = document.getElementById('progress-bar');
        const prevBtn = document.getElementById('prev-btn');

        // --- FUNCTIONS ---

        function startTest() {
            welcomeScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            quizScreen.classList.add('flex');
            loadQuestion(0);
        }

        function loadQuestion(index) {
            currentQuestionIndex = index;
            const q = questions[index];

            // Text Animation
            questionText.style.opacity = '0';
            setTimeout(() => {
                questionText.textContent = q.text;
                questionText.style.opacity = '1';
                questionText.style.transition = 'opacity 0.3s';
            }, 200);

            questionNumber.textContent = `C√¢u h·ªèi ${index + 1}/${questions.length}`;

            // Progress Bar
            const progress = ((index) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;

            // Reset options state
            document.querySelectorAll('.scale-circle').forEach(btn => {
                btn.classList.remove('active');
                // Restore previous answer if any
                if (answers[q.id] && parseInt(btn.dataset.value) === answers[q.id]) {
                    btn.classList.add('active');
                }
            });

            // Prev Button visibility
            prevBtn.style.visibility = index === 0 ? 'hidden' : 'visible';
        }

        function selectOption(value) {
            if (isTransitioning) return;
            isTransitioning = true;

            const q = questions[currentQuestionIndex];
            answers[q.id] = value;

            // Highlight selected immediately
            document.querySelectorAll('.scale-circle').forEach(btn => {
                if (parseInt(btn.dataset.value) === value) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // Wait a bit then move next
            setTimeout(() => {
                if (currentQuestionIndex < questions.length - 1) {
                    loadQuestion(currentQuestionIndex + 1);
                } else {
                    finishTest();
                }
                isTransitioning = false;
            }, 400);
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                loadQuestion(currentQuestionIndex - 1);
            }
        }

        function finishTest() {
            quizScreen.classList.add('hidden');
            quizScreen.classList.remove('flex');
            loadingScreen.classList.remove('hidden');
            loadingScreen.classList.add('flex');

            setTimeout(() => {
                calculateResult();
            }, 2000);
        }

        function calculateResult() {
            let scores = { E: 0, I: 0, N: 0, S: 0, T: 0, F: 0, J: 0, P: 0 };

            questions.forEach(q => {
                let val = answers[q.id] || 3; // Default middle if missing (shouldn't happen)
                // Normalize to -2 to +2 scale logic
                // 1: Strongly Disagree, 5: Strongly Agree
                // If not reversed: 5 adds to Dimension (e.g. E), 1 adds to Opposite (e.g. I)

                let points = 0;
                let targetDim = q.dim;
                let oppDim = getOpposite(q.dim);

                if (q.rev) {
                    // Reversed question (e.g. Introverted question for E dimension)
                    // High score (5) means Introvert -> Add to I
                    if (val > 3) scores[oppDim] += (val - 3);
                    else if (val < 3) scores[targetDim] += (3 - val);
                } else {
                    // Straight question
                    // High score (5) means Extrovert -> Add to E
                    if (val > 3) scores[targetDim] += (val - 3);
                    else if (val < 3) scores[oppDim] += (3 - val);
                }
            });

            // Determine Type
            let type = "";
            type += scores.E >= scores.I ? "E" : "I";
            type += scores.N >= scores.S ? "N" : "S";
            type += scores.T >= scores.F ? "T" : "F";
            type += scores.J >= scores.P ? "J" : "P";

            showResult(type);
        }

        function getOpposite(dim) {
            if (dim === 'E') return 'I';
            if (dim === 'N') return 'S';
            if (dim === 'T') return 'F';
            if (dim === 'J') return 'P';
            return '';
        }

        function showResult(type) {
            const data = types[type] || types['ISTJ']; // Fallback

            document.getElementById('result-type').textContent = type;
            document.getElementById('result-title').textContent = data.title;
            document.getElementById('result-desc').textContent = data.desc;

            const sList = document.getElementById('result-strengths');
            sList.innerHTML = data.strengths.map(s => `<li>${s}</li>`).join('');

            const wList = document.getElementById('result-weaknesses');
            wList.innerHTML = data.weaknesses.map(w => `<li>${w}</li>`).join('');

            loadingScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            resultScreen.classList.add('flex');
        }

    </script>
</body>

</html>