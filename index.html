<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ND Labs - Trang Chủ</title>
  <link rel="icon" href="/logo.png" type="image/png">
  <script src="https://unpkg.com/feather-icons"></script>
  <script async src="https://cse.google.com/cse.js?cx=90bdd5f1afd434b9d"></script>
  <style>
    /* GIỮ NGUYÊN TOÀN BỘ CSS GỐC CỦA BẠN */
    html, body {
      overflow-x: hidden; margin: 0; padding: 10px;
      font-family: system-ui, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #d1e8ff, #fefefe);
      background-attachment: fixed; background-repeat: no-repeat;
      background-size: cover; color: #333;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center; min-height: 100vh;
    }
    .controls {
      position: fixed; top: 15px; left: 15px;
      display: flex; align-items: center; gap: 15px; z-index: 1000;
    }
    .icon-btn {
      cursor: pointer; background: linear-gradient(135deg, #0278ff, #9c5fff); color: white;
      padding: 12px; border-radius: 50%;
      transition: background 0.3s ease, transform 0.3s ease;
      border: none; font-size: 24px; display: flex;
      align-items: center; justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .icon-btn:hover {
      background: linear-gradient(135deg, #0061cf, #824cd8); transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }
    #volumeControl { width: 100px; cursor: pointer; }
    .share-btn {
      position: fixed; top: 15px; right: 15px; background: linear-gradient(135deg, #0278ff, #9c5fff); color: white;
      border-radius: 50%; padding: 12px; cursor: pointer;
      display: flex; align-items: center; justify-content: center; font-size: 24px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: none; z-index: 2000;
    }
    .share-btn:hover {
      background: linear-gradient(135deg, #0061cf, #824cd8); transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }
    .card {
      background: white; padding: 40px 20px; border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      text-align: center; max-width: 500px; width: 100%; margin-top: 20px;
    }
    .avatar { width: 170px; height: 170px; border-radius: 50%; object-fit: cover; margin-bottom: 20px; }
    h1 { margin-bottom: 6px; margin-top: -17px; color: #3a5efd; font-size: 35px; font-weight: bold; text-align: center; }
    p { font-size: 20px; color: #555; margin-top: 0; margin-bottom: 12px; font-weight: 500; text-align: justify; }
    .social { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    .social a { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; }
    .social a:hover { transform: scale(1.1); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    .social img { width: 26px; height: 26px; filter: brightness(0) invert(1); }
    .facebook { background: #1877f2; }
    .youtube  { background: #ff0000; }
    .tiktok   { background: #000000; }
    .email    { background: #ff0000; }
    .zalo     { background: #1877f2; }
    .bitly { background: #EE6123; }
    .social a::after {
      content: attr(data-tooltip); position: absolute; bottom: -28px;
      background: rgba(0,0,0,0.75); color: white; font-size: 12px;
      padding: 4px 8px; border-radius: 4px; opacity: 0;
      transition: opacity 0.3s; pointer-events: none; white-space: nowrap;
      left: 50%; transform: translateX(-50%);
    }
    .social a:hover::after { opacity: 1; }
    .toast {
      position: fixed; left: 50%; background: rgba(0,102,204,0.65); color: white;
      padding: 12px 20px; border-radius: 8px; font-size: 14px; font-weight: 600;
      animation: fadeInOut 5s ease; z-index: 1001;
      display: flex; justify-content: center; align-items: center; text-align: center; backdrop-filter: blur(2px);
    }
    .toast.toast-welcome { top: 50%; transform: translate(-50%, -50%); }
    @keyframes fadeInOut { 0%{opacity:0; transform:translateX(-50%) translateY(10px);} 10%{opacity:1; transform:translateX(-50%) translateY(0);} 90%{opacity:1;} 100%{opacity:0; transform:translateX(-50%) translateY(10px);} }
    .btn {
      width: 100%; max-width: 500px; min-width: 288px; margin: 10px auto;
      color: white; font-size: 20px; padding: 18px 36px; border-radius: 50vw;
      border: none; box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
      font-weight: bold; text-align: center; display: block;
    }
    .btn:hover { transform: translateY(-5px); box-shadow: 0 6px 12px rgba(0,0,0,0.2); }
    .btn:active { transform: translateY(2px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .game-btn { background: linear-gradient(135deg, #4caf50, #ffeb3b); }
    .tts-btn { background: linear-gradient(135deg, #2196f3, #ff7043); }
    .dinhdanganh-btn { background: linear-gradient(135deg, #ff5252, #40e0d0); }
    .maunen-btn { background: linear-gradient(135deg, #ff80ab, #9370db); }
    .qr-btn { background: linear-gradient(135deg, #00c6ff, #0072ff); }
    .tabshare-btn { background: linear-gradient(135deg, #00c4cc, #8a3ffc); }
    .video-btn { background: linear-gradient(135deg, #f83600, #f9d423); }
    .docx-btn { background: linear-gradient(135deg, #2e3cff, #1c00b8); }
    .pptx-btn { background: linear-gradient(135deg, #f83600, #fc2424); }
    .py-btn { background: linear-gradient(135deg, #ffe138, #ff8c00d3); }
    .lucky-btn { background: linear-gradient(135deg, #00c853, #ffd600); }
    .tt-btn { background: linear-gradient(135deg, #00f2ea, #ff0050); }
    .edu-btn { background: linear-gradient(135deg, #8e2de2, #4a00e0); }
    .search-btn { background: linear-gradient(135deg, #11998e, #38ef7d); }
    .windows12-btn { background: linear-gradient(135deg, #396afc, #2948ff); }
    .footer {
      margin-top: 20px; padding: 10px; font-size: 16px; color: #ffffff;
      text-align: center; background: linear-gradient(135deg, #0061cf, #824cd8);
      border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); max-width: 500px; width: 100%;
    }
    /* Browser styles */
    .browser-card { background: var(--card, #fff); backdrop-filter: blur(8px); border-radius: 20px; box-shadow: 0 10px 30px #00000020; padding: 22px; }
    .browser-card .bar { display: flex; align-items: center; gap: 12px; }
    .browser-card input[type="text"] { flex: 1; padding: 14px 16px; border-radius: 999px; border: none; background: #e9ecef; font-size: 16px; outline: none; color: #5d6266;}
    .browser-card button#go { width: 48px; height: 48px; border-radius: 50%; border: none; cursor: pointer; background: linear-gradient(135deg, #3995ff, #9c5fff); color: #ffffff; font-weight: 600; display: flex; align-items: center; justify-content: center; font-size: 18px; }
    .row { display: flex; gap:20px; align-items: center; flex-wrap: wrap; margin-top: 12px; justify-content:center; }
    .custom-select { position: relative; width: 220px; cursor: pointer; user-select: none; }
    .custom-select .selected { background: #e9ecef; border-radius: 999px; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .custom-select .content { display: flex; align-items: center; gap: 8px; flex: 1; justify-content: center; }
    .custom-select .arrow img { width: 10px; transition: transform 0.2s ease; }
    .custom-select.open .arrow img { transform: rotate(180deg); }
    .custom-select .options { display: none; position: absolute; top: 110%; left: 0; width: 100%; background: #fff; border-radius: 12px; box-shadow: 0 4px 12px #0002; z-index: 10; }
    .custom-select .options div { padding: 12px 16px; font-size: 16px; display: flex; align-items: center; gap: 8px; border-radius: 8px; transition: all 0.2s ease; }
    .custom-select .options div:hover { background: #eef1f4; box-shadow: 0 4px 10px rgba(0,0,0,0.15); transform: translateY(-2px); }
    .logo-google { width: 20px; height: 20px; }
    .logo-bing   { width: 18px; height: 24px; }
    .logo-duck   { width: 22px; height: 22px; }

    /* CSS CHO KẾT QUẢ TÌM KIẾM */
    #searchResultArea { width: 100%; max-width: 800px; display: none; margin-top: 20px; }
    .res-item { background: white; padding: 18px; border-radius: 12px; margin-bottom: 15px; border-left: 5px solid #4caf50; text-decoration: none; display: block; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: 0.3s; }
    .res-item:hover { transform: translateY(-3px); }
    .res-title { color: #0077ff; font-weight: bold; font-size: 1.1rem; }
    .res-link { color: #4caf50; font-size: 0.85rem; margin: 4px 0; display: block; word-break: break-all; }
    .res-snippet { color: #666; font-size: 0.9rem; }
    .gsc-control-cse { padding: 0 !important; border: none !important; background: transparent !important; }
  </style>
</head>
<body>
  <div class="controls">
    <button class="icon-btn" id="musicToggleBtn" title="Bật/Tắt nhạc"><i data-feather="play"></i></button>
    <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1" title="Âm lượng" />
  </div>
  <button class="share-btn" onclick="shareWebsite()" title="Chia sẻ"><i data-feather="share-2"></i></button>
  <audio id="backgroundMusic" src="/nhacnen.mp3" loop></audio>

  <div class="wrap" id="browser">
    <div class="browser-card">
      <div class="bar">
        <input id="q" type="text" placeholder="Tìm kiếm công cụ hoặc Web..." autocomplete="off" />
        <button id="go"><img src="/kinhlup.png" alt="" style="width:45px;height:45px;filter:brightness(0) invert(1);" onerror="this.remove()"></button>
      </div>
      <div class="row">
        <div class="custom-select" id="engine">
          <div class="selected" data-value="google">
            <div class="content"><img src="/logogoogle.png" alt="Google" class="logo-google"><span>Google</span></div>
          </div>
          <div class="options">
            <div data-value="google" data-label="Google" data-img="/logogoogle.png"><img src="/logogoogle.png" class="logo-google"><span>Google</span></div>
            <div data-value="bing" data-label="Bing" data-img="/logobing.png"><img src="/logobing.png" class="logo-bing"><span>Bing</span></div>
            <div data-value="duck" data-label="DuckDuckGo" data-img="/logoduckduckgo.png"><img src="/logoduckduckgo.png" class="logo-duck"><span>DuckDuckGo</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="mainContentWrapper" style="width:100%; display: flex; flex-direction: column; align-items: center;">
      <div class="card">
        <img class="avatar" src="/avatar.png" alt="Ảnh đại diện">
        <h1>ND LABS</h1>
        <p>Chào mừng đến với ND Labs – được phát triển bởi Nhật Đăng. Tại đây cung cấp các công cụ miễn phí. Chúc bạn có trải nghiệm vui vẻ khi sử dụng!</p>
        <div class="social">
          <a href="https://facebook.com/nhatdang10.nd" class="facebook" target="_blank" data-tooltip="Facebook"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook"></a>
          <a href="https://www.youtube.com/@NhatDang_10" class="youtube" target="_blank" data-tooltip="YouTube"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg" alt="YouTube"></a>
          <a href="https://www.tiktok.com/@nhatdang_10" class="tiktok" target="_blank" data-tooltip="TikTok"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" alt="TikTok"></a>
          <a href="mailto:lienhe.nhatdang@gmail.com" class="email" data-tooltip="Email"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/gmail.svg" alt="Email"></a>
          <a href="https://zalo.me/0379065349" class="zalo" target="_blank" data-tooltip="Zalo"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/zalo.svg" alt="Zalo" style="width:34px;height:34px"></a>
          <a href="https://bit.ly/m/nhatdang10" class="bitly" target="_blank" data-tooltip="Bit.ly"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/bitly.svg" alt="Bit.ly"></a>
        </div>
        <button class="btn edu-btn" onclick="location.href='/eduspace'">EduSpace by ND Labs</button>
        <button class="btn search-btn" onclick="location.href='/search'">Search</button>
        <button class="btn windows12-btn" onclick="location.href='/windows12'">Windows 12</button>
        <button class="btn game-btn" onclick="location.href='/dino'">Dino</button>
        <button class="btn tts-btn" onclick="location.href='/chuyen-van-ban-thanh-giong-noi'">Chuyển Văn Bản Thành Giọng Nói</button>
        <button class="btn dinhdanganh-btn" onclick="location.href='/chuyen-doi-dinh-dang-loai-anh'">Chuyển Đổi Định Dạng Loại Ảnh</button>
        <button class="btn maunen-btn" onclick="location.href='/nen-gradient-pastel'">Nền Gradient Pastel</button>
        <button class="btn qr-btn" onclick="location.href='/qr'">Tạo Mã QR</button>
        <button class="btn tabshare-btn" onclick="location.href='/share'">Share</button>
        <button class="btn video-btn" onclick="location.href='/video'">Video</button>
        <button class="btn docx-btn" onclick="location.href='/docx'">Docx</button>
        <button class="btn pptx-btn" onclick="location.href='/pptx'">PPTX</button>
        <button class="btn py-btn" onclick="location.href='/python'">Python</button>
        <button class="btn lucky-btn" onclick="location.href='/lucky/vong-quay-may-man.html'">Lucky</button>
        <button class="btn tt-btn" onclick="location.href='/tiktok/wrapped'">TikTok Wrapped - Gemini</button>
        <button class="btn tt-btn" onclick="location.href='/tiktok/wrapped-chatgpt'">TikTok Wrapped - ChatGPT</button>
        <button class="btn tt-btn" onclick="location.href='/tiktok/wrapped-deepseek'">TikTok Wrapped - DeepSeek</button>
      </div>
      <footer class="footer">© 2025 ND Labs. All rights reserved.</footer>
  </div>

  <div id="searchResultArea">
    <div id="internalResults"></div>
    <div id="googleZone">
        <div style="font-size: 0.8rem; color: #888; margin: 20px 0 10px;">KẾT QUẢ TỪ GOOGLE WEB</div>
        <div class="gcse-searchresults-only" data-gname="nd-engine"></div>
    </div>
  </div>

  <div class="toast toast-welcome">Trang web có nhạc nền. Cảm ơn bạn đã ghé thăm và ủng hộ!</div>

  <script>
    /* GIỮ NGUYÊN TOÀN BỘ LOGIC GỐC CỦA BẠN */
    const music = document.getElementById("backgroundMusic");
    const volumeControl = document.getElementById("volumeControl");
    const toggleBtn = document.getElementById("musicToggleBtn");
    toggleBtn.addEventListener("click", () => {
      if (music.paused) { music.play(); toggleBtn.innerHTML='<i data-feather="pause"></i>'; }
      else { music.pause(); toggleBtn.innerHTML='<i data-feather="play"></i>'; }
      feather.replace();
    });
    volumeControl.addEventListener("input", function(){ music.volume = this.value; });
    function shareWebsite(){ navigator.clipboard.writeText("Trang chủ của ND Labs: https://nd-site.github.io").then(()=>{ const toast=document.createElement("div"); toast.className="toast"; toast.textContent="Đã sao chép liên kết vào bộ nhớ tạm!"; document.body.appendChild(toast); setTimeout(()=>{toast.remove();},5000);}); }
    window.addEventListener("load",()=>{ toggleBtn.innerHTML= music.paused?'<i data-feather="play"></i>':'<i data-feather="pause"></i>'; feather.replace();});
    setTimeout(()=>{document.querySelector(".toast-welcome").style.display="none";},5000);
    feather.replace();

    /* BROWSER LOGIC GỐC */
    const $q=document.getElementById("q"); const $go=document.getElementById("go"); const $engine=document.getElementById("engine");
    const ENGINES={ google:q=>`https://www.google.com/search?q=${encodeURIComponent(q)}`, bing:q=>`https://www.bing.com/search?q=${encodeURIComponent(q)}`, duck:q=>`https://duckduckgo.com/?q=${encodeURIComponent(q)}` };
    const selected=$engine.querySelector(".selected"); const selectedContent=selected.querySelector(".content"); const options=$engine.querySelector(".options");
    selected.addEventListener("click",()=>{const isOpen=$engine.classList.contains("open"); options.style.display=isOpen?"none":"block"; $engine.classList.toggle("open",!isOpen);});
    options.querySelectorAll(":scope > div").forEach(option=>{option.addEventListener("click",()=>{const imgSrc=option.dataset.img||""; const label=option.dataset.label||""; selectedContent.textContent=""; if(imgSrc){const img=document.createElement("img"); img.src=imgSrc; if(label==="Google") img.className="logo-google"; if(label==="Bing") img.className="logo-bing"; if(label==="DuckDuckGo") img.className="logo-duck"; selectedContent.appendChild(img);} const span=document.createElement("span"); span.textContent=label; selectedContent.appendChild(span); selected.dataset.value=option.dataset.value; options.style.display="none"; $engine.classList.remove("open");});});

    /* --- LOGIC LIVE SEARCH & REPO --- */
    const CONFIG = { username: 'nd-site', repositories: ['nd-site.github.io', 'test', 'windows12', 'eduspace', 'hoctap'], branch: 'main' };
    let searchDatabase = [];

    async function initSearchData() {
        const cached = localStorage.getItem('nd_search_cache');
        if(cached) { searchDatabase = JSON.parse(cached).database; return; }
        for(const repo of CONFIG.repositories) {
            try {
                const res = await fetch(`https://api.github.com/repos/${CONFIG.username}/${repo}/git/trees/${CONFIG.branch}?recursive=1`);
                const data = await res.json();
                if(data.tree) {
                    data.tree.filter(f => f.path.endsWith('.html')).forEach(f => {
                        const base = repo === 'nd-site.github.io' ? '/' : `/${repo}/`;
                        searchDatabase.push({ title: f.path.split('/').pop().replace('.html','').toUpperCase(), url: base + f.path, repo: repo });
                    });
                }
            } catch(e){}
        }
        localStorage.setItem('nd_search_cache', JSON.stringify({timestamp: Date.now(), database: searchDatabase}));
    }
    initSearchData();

    const $mainWrapper = document.getElementById("mainContentWrapper");
    const $searchArea = document.getElementById("searchResultArea");
    const $internal = document.getElementById("internalResults");

    $q.addEventListener('input', () => {
        const val = $q.value.trim().toLowerCase();
        if (val.length > 0) {
            $mainWrapper.style.display = "none";
            $searchArea.style.display = "block";
            
            // Tìm nội bộ Repo
            $internal.innerHTML = "";
            const matches = searchDatabase.filter(i => i.title.toLowerCase().includes(val));
            matches.forEach(item => {
                const a = document.createElement('a');
                a.className = 'res-item'; a.href = item.url;
                a.innerHTML = `<span class="res-title">${item.title}</span><span class="res-link">nd-site.github.io${item.url}</span><div class="res-snippet">Công cụ tìm thấy trong kho lưu trữ: ${item.repo}</div>`;
                $internal.appendChild(a);
            });

            // Gọi Google CSE
            if (window.google?.search?.cse) {
                google.search.cse.element.getElement('nd-engine').execute(val);
            }
        } else {
            $mainWrapper.style.display = "flex";
            $searchArea.style.display = "none";
        }
    });

    // Handle Go button (Giữ nguyên logic nhảy trang của bạn)
    function handleGo(){
        const val=$q.value; 
        if(!val.trim()) return;
        const engineKey=selected.dataset.value||"google";
        window.location.assign(ENGINES[engineKey](val.trim()));
    }
    $go.addEventListener('click',handleGo);
    $q.addEventListener('keydown',(e)=>{if(e.key==='Enter') handleGo();});
  </script>
</body>
</html>
